{"ast":null,"code":"import { HttpEventType, HttpResponse } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/mainservice.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../../services/group-service.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../student-dash/student-dash.component\";\nfunction StudentTodosComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\", 2);\n    i0.ɵɵtext(2, \"You are upto date \");\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    width: a0\n  };\n};\nfunction StudentTodosComponent_div_3_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"div\", 23);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c0, ctx_r4.progress + \"%\"));\n    i0.ɵɵattribute(\"aria-valuenow\", ctx_r4.progress);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.progress, \"% \");\n  }\n}\nfunction StudentTodosComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"div\", 5);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementStart(4, \"span\", 6);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"div\");\n    i0.ɵɵelementStart(8, \"button\", 7);\n    i0.ɵɵtext(9, \"Submit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 8)(11, \"div\", 9)(12, \"div\", 10)(13, \"div\", 11)(14, \"h5\", 12);\n    i0.ɵɵtext(15, \"Assignment Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"button\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 14)(18, \"form\", 15, 16);\n    i0.ɵɵlistener(\"ngSubmit\", function StudentTodosComponent_div_3_Template_form_ngSubmit_18_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const ass_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.uploadAssign(ass_r2.assignId));\n    });\n    i0.ɵɵelementStart(20, \"div\", 17)(21, \"label\", 18);\n    i0.ɵɵtext(22, \"Assignment\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"input\", 19);\n    i0.ɵɵlistener(\"change\", function StudentTodosComponent_div_3_Template_input_change_23_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.selectFile($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(24, StudentTodosComponent_div_3_div_24_Template, 3, 5, \"div\", 20);\n    i0.ɵɵelementStart(25, \"button\", 21);\n    i0.ɵɵtext(26, \"Add\");\n    i0.ɵɵelementEnd()()()()()()()()();\n  }\n  if (rf & 2) {\n    const ass_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ass_r2.assignName, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Due time : \", i0.ɵɵpipeBind2(6, 5, ass_r2.endDate, \"dd/MM/yyyy HH:mm:ss\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵattribute(\"data-target\", \"#uploadFile\" + ass_r2.assignId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"id\", \"uploadFile\" + ass_r2.assignId);\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.currentFile);\n  }\n}\nexport class StudentTodosComponent {\n  constructor(ms, route, gs) {\n    this.ms = ms;\n    this.route = route;\n    this.gs = gs;\n    this.loggedIn = false;\n    this.progress = 0;\n  }\n  ngOnInit() {\n    this.loggedIn = this.ms.isLoggedIn();\n    this.id = this.route.snapshot.paramMap.get('userId');\n    this.gs.getTodos(this.id).subscribe(data => {\n      this.assigns = data;\n    }, error => {});\n  }\n  selectFile(event) {\n    this.selectedFiles = event.target.files;\n  }\n  uploadAssign(assignId) {\n    this.progress = 0;\n    if (this.selectedFiles) {\n      const file = this.selectedFiles.item(0);\n      if (file) {\n        this.currentFile = file;\n        this.gs.submitFile(this.currentFile, assignId, this.id).subscribe(event => {\n          if (event.type === HttpEventType.UploadProgress) {\n            this.progress = Math.round(100 * event.loaded / event.total);\n          } else if (event instanceof HttpResponse) {\n            this.message = event.body.message;\n          }\n        }, err => {\n          console.log(err);\n          this.progress = 0;\n          if (err.error && err.error.message) {\n            this.message = err.error.message;\n          } else {\n            this.message = 'Could not upload the file!';\n          }\n          this.currentFile = undefined;\n        });\n      }\n      this.selectedFiles = undefined;\n    }\n  }\n}\nStudentTodosComponent.ɵfac = function StudentTodosComponent_Factory(t) {\n  return new (t || StudentTodosComponent)(i0.ɵɵdirectiveInject(i1.MainserviceService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.GroupServiceService));\n};\nStudentTodosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: StudentTodosComponent,\n  selectors: [[\"app-student-todos\"]],\n  decls: 4,\n  vars: 2,\n  consts: [[4, \"ngIf\"], [\"class\", \"card-deck\", \"style\", \"margin-left: 15%;margin-right: 15%;\", 4, \"ngFor\", \"ngForOf\"], [2, \"color\", \"green\", \"text-align\", \"center\"], [1, \"card-deck\", 2, \"margin-left\", \"15%\", \"margin-right\", \"15%\"], [1, \"card\", \"mb-3\", \"border-primary\"], [1, \"card-body\", \"shadow-lg\"], [2, \"float\", \"right\"], [\"data-toggle\", \"modal\", \"type\", \"submit\", 1, \"btn\", \"btn-success\", 2, \"float\", \"right\"], [\"tabindex\", \"-1\", \"aria-labelledby\", \"exampleModalLabel2\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\", 3, \"id\"], [1, \"modal-dialog\", \"d-flex\", \"justify-content-center\"], [1, \"modal-content\", \"w-75\"], [1, \"modal-header\"], [\"id\", \"exampleModalLabel2\", 1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\", \"p-4\"], [\"enctype\", \"multipart/form-data\", 3, \"ngSubmit\"], [\"groupForm\", \"ngForm\"], [1, \"form-outline\", \"mb-4\"], [1, \"form-label\"], [\"type\", \"file\", 3, \"change\"], [\"class\", \"progress my-3\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-block\"], [1, \"progress\", \"my-3\"], [\"role\", \"progressbar\", \"aria-valuemin\", \"0\", \"aria-valuemax\", \"100\", 1, \"progress-bar\", \"progress-bar-info\", \"progress-bar-striped\", 3, \"ngStyle\"]],\n  template: function StudentTodosComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-student-dash\")(1, \"br\");\n      i0.ɵɵtemplate(2, StudentTodosComponent_div_2_Template, 3, 0, \"div\", 0);\n      i0.ɵɵtemplate(3, StudentTodosComponent_div_3_Template, 27, 8, \"div\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.assigns.length == 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.assigns);\n    }\n  },\n  dependencies: [i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i5.NgForOf, i5.NgIf, i5.NgStyle, i6.StudentDashComponent, i5.DatePipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["HttpEventType","HttpResponse","i0","StudentTodosComponent","constructor","ms","route","gs","ngOnInit","loggedIn","isLoggedIn","id","snapshot","paramMap","get","getTodos","subscribe","data","assigns","error","selectFile","event","selectedFiles","target","files","uploadAssign","assignId","progress","file","item","currentFile","submitFile","type","UploadProgress","Math","round","loaded","total","message","body","err","console","log","undefined","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/KO20422228/Documents/frontend-els/ELS_UI/src/app/student/student-todos/student-todos.component.ts","/Users/KO20422228/Documents/frontend-els/ELS_UI/src/app/student/student-todos/student-todos.component.html"],"sourcesContent":["import { HttpEventType, HttpResponse } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { GroupServiceService } from '../../../services/group-service.service';\nimport { MainserviceService } from '../../../services/mainservice.service';\n\n@Component({\n  selector: 'app-student-todos',\n  templateUrl: './student-todos.component.html',\n  styleUrls: ['./student-todos.component.css']\n})\nexport class StudentTodosComponent implements OnInit{\n\n  public loggedIn =false;\n  public id:any;\n  public assigns:any;\n  selectedFiles?: FileList;\n  currentFile?: File;\n  progress = 0;\n  fileInfos?: Observable<any>;\n  message: any;\n  constructor(private ms:MainserviceService,private route:ActivatedRoute,private gs:GroupServiceService){\n\n  }\n  ngOnInit(): void {\n    this.loggedIn = this.ms.isLoggedIn();\n    this.id=this.route.snapshot.paramMap.get('userId');\n\n    this.gs.getTodos(this.id).subscribe(\n      data=>{\n       this.assigns=data;\n      },\n      error=>{\n\n      }\n    )\n  }\n  selectFile(event: any): void {\n    this.selectedFiles = event.target.files;\n  }\n\n  uploadAssign(assignId:number): void {\n    this.progress = 0;\n  \n    if (this.selectedFiles) {\n      const file: File | null = this.selectedFiles.item(0);\n  \n      if (file) {\n        this.currentFile = file;\n       \n        this.gs.submitFile(this.currentFile,assignId,this.id).subscribe(\n          (event: any) => {\n            if (event.type === HttpEventType.UploadProgress) {\n              this.progress = Math.round(100 * event.loaded / event.total);\n            } else if (event instanceof HttpResponse) {\n              this.message = event.body.message;\n              \n            }\n          },\n          (err: any) => {\n            console.log(err);\n            this.progress = 0;\n  \n            if (err.error && err.error.message) {\n              this.message = err.error.message;\n            } else {\n              this.message = 'Could not upload the file!';\n            }\n  \n            this.currentFile = undefined;\n          });\n      }\n  \n      this.selectedFiles = undefined;\n    }\n  }\n\n}\n","<app-student-dash></app-student-dash><br>\n<div *ngIf=\"assigns.length == 0\">\n   <h3 style=\"color:green;text-align:center;\">You are upto date </h3>\n</div>\n<div  class=\"card-deck\" style=\"margin-left: 15%;margin-right: 15%;\" *ngFor=\"let ass of assigns\">\n    <div class=\"card mb-3 border-primary\" >\n        <div class=\"card-body shadow-lg\">\n            {{ass.assignName}}   \n            <span style=\"float: right;\">Due time : {{ ass.endDate | date:'dd/MM/yyyy HH:mm:ss'}}</span>\n           <div></div> <button class=\"btn btn-success\" style=\"float:right\" data-toggle=\"modal\" type=\"submit\" [attr.data-target]=\"'#uploadFile' + ass.assignId\">Submit</button>\n                <!-------------------------Upload Assignment--------------------------------->\n                <div class=\"modal fade\" [id]=\"'uploadFile'+ ass.assignId\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel2\" aria-hidden=\"true\">\n                    <div class=\"modal-dialog d-flex justify-content-center\">\n                        <div class=\"modal-content w-75\">\n                            <div class=\"modal-header\">\n                                <h5 class=\"modal-title\" id=\"exampleModalLabel2\">Assignment Details</h5>\n                                <button type=\"button\" class=\"btn-close\" data-dismiss=\"modal\" aria-label=\"Close\"></button>\n                            </div>\n                            <div class=\"modal-body p-4\">\n                                <form  #groupForm=\"ngForm\" (ngSubmit)=\"uploadAssign(ass.assignId)\" enctype=\"multipart/form-data\">\n                                    <!-- Name input -->\n                                    <div class=\"form-outline mb-4\">\n                                        <label class=\"form-label\" >Assignment</label>\n                                        <input type=\"file\" (change)=\"selectFile($event)\" />\n                                       \n                                    </div>\n                                   \n                                    <div *ngIf=\"currentFile\" class=\"progress my-3\">\n                                        <div\n                                          class=\"progress-bar progress-bar-info progress-bar-striped\"\n                                          role=\"progressbar\"\n                                          attr.aria-valuenow=\"{{ progress }}\"\n                                          aria-valuemin=\"0\"\n                                          aria-valuemax=\"100\"\n                                          [ngStyle]=\"{ width: progress + '%' }\"\n                                        >\n                                          {{ progress }}%\n                                        </div>\n                                      </div>\n                                 \n                                \n                \n                                    <!-- End Date input -->\n                                    \n                                   \n                \n                                    <!-- Submit button -->\n                                    <button type=\"submit\" class=\"btn btn-primary btn-block\">Add</button>\n                                </form>\n                            </div>\n                            </div>\n                            </div>\n                            </div>\n                            </div>\n                            </div>\n                            </div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}